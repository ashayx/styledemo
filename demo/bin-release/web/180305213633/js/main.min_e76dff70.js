var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function l(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,l)}c((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,i&&(o=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[0,o.value]),n[0]){case 0:case 1:o=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(o=c.trys,!(o=o.length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){c.label=n[1];break}if(6===n[0]&&c.label<o[1]){c.label=o[1],o=n;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(n);break}o[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(r){n=[6,r],i=0}finally{a=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,i,o,l,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return l={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},Demo1=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){var e=this,t=this.stage.stageWidth,n=this.stage.stageHeight,r=new egret.Sprite;r.width=t,r.height=n,this.addChild(r);var a=Array.from({length:20}).map(function(e,t){return t});a[2]="面",a[6]="试",a[15]="题",console.log(a);for(var i=function(e){var t=130*(e%4+1),n=130*Math.floor(e/4)+80,i=o.createShp(t,n,50);i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.touchAnimation(i,400,t,n,e==a[e]?null:a[e])},o),r.addChild(i)},o=this,l=0;20>l;l++)i(l);var c=new egret.TextField;c.text="next demo",c.x=100,c.y=n-200,c.size=100,r.addChild(c),c.touchEnabled=!0,c.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.changePage(new Demo2)},this)},t.prototype.createShp=function(e,t,n){var r=new egret.Shape;return r.x=e,r.y=t,r.graphics.lineStyle(1,0),r.graphics.beginFill(0,1),r.graphics.drawCircle(0,0,n),r.graphics.endFill(),r},t.prototype.touchAnimation=function(e,t,n,r,a){var i=this;egret.Tween.get(e).call(function(){e.graphics.clear(),e.graphics.lineStyle(1,i.getColor()),e.graphics.beginFill(i.getColor(),1),e.graphics.drawCircle(0,0,50),e.graphics.endFill()}).to({scaleX:1.5,scaleY:1.5,alpha:.3},t,egret.Ease.cubicOut).call(function(){e.graphics.clear(),e.graphics.lineStyle(1,i.getColor()),e.graphics.beginFill(i.getColor(),1),e.graphics.drawCircle(0,0,50),e.graphics.endFill()}).to({scaleX:1,scaleY:1,alpha:1},t,egret.Ease.cubicOut).call(function(){if(a){e.graphics.clear();var t=new egret.TextField;t.text=a,t.x=n-18,t.y=r-18,t.width=t.height=60,i.addChild(t)}})},t.prototype.getColor=function(){for(var e="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f",t=e.split(","),n="0x",r=0;6>r;r++)n+=t[Math.floor(16*Math.random())];return parseInt(n)},t.prototype.changePage=function(e){var t=this;if(null!=this.parent){var n=function(e){for(var t=0;t<e.numChildren;t++)egret.Tween.removeTweens(e.getChildAt(t)),null!=e.mask&&(e.mask.parent.removeChild(e.mask),e.mask=null),e instanceof egret.DisplayObjectContainer&&n(e.getChildAt(t)),e instanceof egret.MovieClip&&e.stop()};n(this),e.alpha=0,e.scaleX=e.scaleY=1.3,this.parent.addChild(e),egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1},500,egret.Ease.cubicOut).call(function(){null!=t.parent&&t.parent.removeChild(t)},this)}},t}(egret.Sprite);__reflect(Demo1.prototype,"Demo1");var Demo2=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),console.log("demo2"),t}return __extends(t,e),t.prototype.onAddToStage=function(){var e=this,t=this.stage.stageWidth,n=this.stage.stageHeight,r=this.createBitmap("0_jpg");r.width=t,r.height=n,this.addChild(r);var a=new egret.Shape;a.x=0,a.y=0,a.graphics.lineStyle(1,16777215),a.graphics.beginFill(16777215,1),a.graphics.drawRect(.11*t,.12*n,.76*t,.76*n),a.graphics.endFill(),a.alpha=0,this.addChild(a);var i=this.createBitmap("finger_png");i.x=.5*t-i.width/2,i.y=.5*n-i.height/2,this.addChild(i),i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=this;egret.Tween.get(i).to({alpha:0},200).call(function(){e.removeChild(i),egret.Tween.get(a).to({alpha:1},300)})},this);var o=new egret.TextField;o.text="全球首款",o.size=100,o.textColor=0,o.x=.5*t-o.width/2,o.y=.3*n,this.addChild(o);var l=new egret.TextField;l.text="屏幕指纹手机",l.size=80,l.textColor=0,l.x=.5*t-l.width/2,l.y=.45*n,this.addChild(l);var c=new egret.TextField;c.text="外",c.size=100,c.textColor=0,c.x=.2*t-c.width/2+100,c.y=.25*n,this.addChild(c);var s=new egret.TextField;s.text="观",s.size=100,s.textColor=0,s.x=.5*t-s.width/2+100,s.y=.25*n,this.addChild(s);var h=new egret.TextField;h.text="超",h.size=100,h.textColor=0,h.x=.2*t-h.width/2+100,h.y=.55*n,this.addChild(h);var u=new egret.TextField;u.text="酷",u.size=100,u.textColor=0,u.x=.5*t-u.width/2+100,u.y=.55*n,this.addChild(u),o.alpha=l.alpha=c.alpha=s.alpha=h.alpha=u.alpha=0;var d=new egret.TextField;d.text="next demo",d.x=100,d.y=n-500,d.size=100,d.touchEnabled=!0,d.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.changePage(new Demo1)},this),a.touchEnabled=!0,a.once(egret.TouchEvent.TOUCH_TAP,function(){a.touchEnabled=!1,egret.Tween.get(o).to({rotation:45},0).to({rotation:0,alpha:1},300).call(function(){egret.Tween.get(l).to({rotation:45},0).to({rotation:0,alpha:1},300).call(function(){a.touchEnabled=!0,a.once(egret.TouchEvent.TOUCH_TAP,function(){a.touchEnabled=!1,o.alpha=l.alpha=0,egret.Tween.get(a).to({alpha:0},100).to({alpha:1},100).to({alpha:0},100).to({alpha:1},100).call(function(){egret.Tween.get(c).to({scaleX:1.2,scaleY:1.2,alpha:1},130).to({scaleX:1,scaleY:1,alpha:1},130).call(function(){egret.Tween.get(s).to({scaleX:1.2,scaleY:1.2,alpha:1},130).to({scaleX:1,scaleY:1,alpha:1},130).call(function(){egret.Tween.get(h).to({scaleX:1.2,scaleY:1.2,alpha:1},130).to({scaleX:1,scaleY:1,alpha:1},130).call(function(){egret.Tween.get(u).to({scaleX:1.2,scaleY:1.2,alpha:1},130).to({scaleX:1,scaleY:1,alpha:1},130).call(function(){a.touchEnabled=!0,a.once(egret.TouchEvent.TOUCH_TAP,function(){egret.Tween.get(a).to({alpha:0,x:-t},300).call(function(){e.addChild(d)})},e)})})})})})},e)})})},this)},t.prototype.createBitmap=function(e,t){void 0===t&&(t=!1);var n=new egret.Bitmap(RES.getRes(e));return t&&(n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2),n},t.prototype.changePage=function(e){var t=this;if(null!=this.parent){var n=function(e){for(var t=0;t<e.numChildren;t++)egret.Tween.removeTweens(e.getChildAt(t)),null!=e.mask&&(e.mask.parent.removeChild(e.mask),e.mask=null),e instanceof egret.DisplayObjectContainer&&n(e.getChildAt(t)),e instanceof egret.MovieClip&&e.stop()};n(this),e.alpha=0,e.scaleX=e.scaleY=1.3,this.parent.addChild(e),egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1},500,egret.Ease.cubicOut).call(function(){null!=t.parent&&t.parent.removeChild(t)},this)}},t}(egret.Sprite);__reflect(Demo2.prototype,"Demo2");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){egret.lifecycle.addLifecycleListener(function(e){e.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=n.sent(),[4,platform.login()];case 3:return n.sent(),[4,platform.getUserInfo()];case 4:return t=n.sent(),console.log(t),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 2:return n.sent(),this.stage.removeChild(e),[3,4];case 3:return t=n.sent(),console.error(t),[3,4];case 4:return[2]}})})},t.prototype.createGameScene=function(){this.addChild(new Demo2)},t.prototype.createBitmap=function(e,t){void 0===t&&(t=!1);var n=new egret.Bitmap(RES.getRes(e));return t&&(n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2),n},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);